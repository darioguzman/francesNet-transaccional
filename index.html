<!DOCTYPE html>
<html>
  <head>
    <title>Francés Go</title>
    <meta charset=utf-8 />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta name="HandheldFriendly" content="True" />
	<meta name="x-blackberry-defaultHoverEffect" content="true" /> 
    <link href='assets/stylesheets/jquery.mobile.theme-1.2.0.css' rel='stylesheet' id="theme-css"/>
    <link href='assets/stylesheets/jquery.mobile-1.2.0.css' rel='stylesheet' />
	<script type="text/javascript" src="assets/js/jquery-1.8.2.js"></script>
	<script type="text/javascript" src="assets/js/jquery.mobile-1.2.0.min.js"></script>
	<script type="text/javascript" src="assets/js/fnet.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1,user-scalable=no" />
  </head>
<body>

   <div data-role="page" id='page1' data-theme="a">
		<div data-position='fixed' data-role='header' data-tap-toggle="false"  screen="true" style='position:fixed' >
        	<a data-icon='arrow-l' href='#' onclick='history.back(-1)' data-transition="slide" data-direction=”reverse” >Atrás</a>
        	<h1>Menu principal</h1>
    	</div>
		<div data-role="content">
			<ul data-role="listview">
				<li><a data-role='button' href='#page2' data-transition="slide">Buscar Provincias</a></li>
				<li><a data-role='button' href='#page3' data-transition="slide">Buscar Localidades</a></li>
				<li><a data-role='button' href='#page4' data-transition="slide">Buscar Barrios</a></li>
			</ul>
           		
         
    	</div>
	</div>
     
    <div data-theme="b" data-role="page" id="page2">
    	<div data-position='fixed' data-role='header' data-tap-toggle='false' style='position:fixed'>
			<a data-icon='arrow-l' href='#page1' data-transition="slide" data-direction=”reverse” >Atrás</a>
        	<h1>Provincias</h1>
    	</div>
    	
    	<div data-role="content">
    		<div >
    			<a id='findProv' data-role="button" href='#' data-transition="slide">Todas las provincias</a>
    		</div>
    	
   			<div class='ui-content ui-scrollview-clip' data-role='content' data-scroll='y' role='main'>
         		
         		<ul id="ul-prov" data-inset='true' data-role='listview'>
	  	        </ul>
    		</div>
    	</div>
   	</div>
   	
   	 <div data-theme="c" data-role="page" id="page3">
    	<div data-position='fixed' data-role='header' data-tap-toggle='false' style='position:fixed'>
			<a data-icon='arrow-l' href='#page1' data-transition="slide" data-direction=”reverse” >Atrás</a>
        	<h1>Localidades</h1>
    	</div>
    	
    	<div data-role="content">
    		<div >
    			<a id='findLoc' data-role="button" href='#' data-transition="slide">Todas las localidades</a>
    		</div>
    	
   			<div class='ui-content ui-scrollview-clip' data-role='content' data-scroll='y' role='main'>
         		
         		<ul id="ul-loc" data-inset='true' data-role='listview'>
	  	        </ul>
    		</div>
    	</div>
   	</div>
   	
   	 <div data-theme="e" data-role="page" id="page4">
    	<div data-position='fixed' data-role='header' data-tap-toggle='false' style='position:fixed'>
			<a data-icon='arrow-l' href='#page1' data-transition="slide" data-direction=”reverse” >Atrás</a>
        	<h1>Barrios</h1>
    	</div>
    	
    	<div data-role="content">
    		<div >
    			<a id='findBar' data-role="button" href='#' data-transition="slide">Todos los barrios</a>
    		</div>
    	
   			<div class='ui-content ui-scrollview-clip' data-role='content' data-scroll='y' role='main'>
         		
         		<ul id="ul-bar" data-inset='true' data-role='listview'>
	  	        </ul>
    		</div>
    	</div>
   	</div>
   	
   	
      
</body>
	<script type="text/javascript">
	
		baseUrl = '';
//		baseUrl = 'http://192.168.1.105:8080/francesGo2-portal/mobile/';
//	   	baseUrl =  'https://bbvawebqa.bancofrances.com.ar/francesGo2-portal/mobile/';
	  	baseUrl = 'http://m.francesgo.com.ar/francesGo2-Portal/mobile/';
	  		
		$(document).ready(function() {
			
			$('#findProv').live('click',function(){
				
				var callBack = function(data){
					
					data.regionesOrdenables[0].forEach(function(item) {
						
						insertDataProv(item);
						
					})
					
					
				}
				
// 				var url = 'http://localhost:8080/francesGo2-portal/mobile/mobile-initialization.json'
				var url = 'http://m.francesgo.com.ar/francesGo2-Portal/mobile/mobile-initialization.json'
// 				var url = baseUrl + 'mobile-initialization.json';
			    
// 				checkNavigator(url, callBack, null);
				
				$.ajax({url:url, type:'GET' ,data:null,cache: false, success: callBack, error: function(jqXHR, textStatus, errorThrown) {
					alert("error on: " + textStatus + ", "+ errorThrown);  
					
					console.log(textStatus, errorThrown);
				}});
					$.mobile.hidePageLoadingMsg();
			})
			
			$('#findLoc').live('click',function(){
				
				var callBack = function(data){
					
					data.result.forEach(function(item) {
						
						insertDataLoc(item);
						
					})
					
					$.mobile.hidePageLoadingMsg();
					
				}
				
				var url = 'http://localhost:8080/francesGo2-portal/exportador-planilla.json'
				
				var data = {}
				
				data.action = 'getLocalidades';
				
				checkNavigator(url,callBack,data);
				
				$.ajax({url:url, type:'POST', data:data, cache: false, success: callBack, error: function(jqXHR, textStatus, errorThrown) {
					alert("error on: " + textStatus + ", "+ errorThrown);  
					
					console.log(textStatus, errorThrown);
				}});
			})
			
			$('#findBar').live('click',function(){
				
				var callBack = function(data){
					
					data.result.forEach(function(item) {
						
						insertDataBarrio(item);
						
					})
				}
					
				var url = 'http://localhost:8080/francesGo2-portal/exportador-planilla.json'
				
				var data = {};
				
				data.action = 'getBarrios';
				
				checkNavigator(url,callBack,data);
				
				$.ajax({url:url, type:'POST', data:data, cache: false, success: callBack, error: function(jqXHR, textStatus, errorThrown) {
					alert("error on: " + textStatus + ", "+ errorThrown);  
					
					console.log(textStatus, errorThrown);
				}});
				
				$.mobile.hidePageLoadingMsg();
					
			})
			
		});
		
	</script>
</html>
